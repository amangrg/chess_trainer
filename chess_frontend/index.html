<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chess FEN Trainer</title>
    <!--
      We leverage the popular chessboard.js library to render the board and
      chess.js to provide move validation and game state management. These
      libraries are distributed under the MIT licence and can be loaded
      directly from a CDN. The board accepts Forsyth‑Edwards Notation
      (FEN), a standard way to describe a particular chess position【115677098837149†L133-L165】.
    -->
    <!-- The chessboard is built with CSS grid in styles.css, so we don't
         include external CSS for chessboard.js. -->
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <h1>Chess FEN Trainer</h1>
      <p>
        This trainer loads positions from a CSV of FEN strings and model‑
        predicted moves. A file named <code>data.csv</code> should sit in the
        same folder as this page; its positions will load automatically.
        Use the **Next →** button below the board to step through each entry.
        You can still type your own FEN string in the box if you wish to
        explore a custom position.
      </p>
      <!-- Model selector: choose which CSV to load (supports adding new files) -->
      <div class="model-selector">
        <label for="model-select">Select model :</label>
        <select id="model-select">
          <option value="gpt20b.csv">gpt20b</option>
          <option value="mistral7b.csv">mistral7b</option>
          <!-- <option value="data.csv">data.csv (legacy)</option>
          <option value="other">Other (enter filename)</option> -->
        </select>
        <input id="model-custom" type="text" placeholder="e.g. deepseek7b.csv" style="display:none; margin-left:8px;" />
      </div>
      <!-- FEN input and load button -->
      <div class="fen-controls">
        <input
          type="text"
          id="fen-input"
          class="fen-input"
          placeholder="Enter FEN string"
          value="rnbqk1nr/1p2ppbp/p2p2p1/8/3PP3/2N2N1P/PP3PP1/R1BQKB1R b KQkq -"
        />
        <button id="load-button" class="load-btn">Load Position</button>
      </div>
      <div class="main">
        <div class="left">
          <!-- Chessboard container -->
          <div id="board" class="chessboard"></div>
        </div>
        <aside class="right info">
          <div class="output">
            <h3 class="output-label">LLM move</h3>
            <p id="llm-move" class="llm">&nbsp;</p>
          </div>
          <div class="output">
            <h3 class="output-label">Your move</h3>
            <p id="user-move" class="user-move">&nbsp;</p>
          </div>
          <div class="output">
            <h3 class="output-label">LLM reasoning</h3>
            <pre id="full-reply" class="full-reply" style="white-space:pre-wrap; margin-top:8px;">&nbsp;</pre>
          </div>
          <div class="output">
            <h3 class="output-label">Best move?</h3>
            <p id="llm-eval" class="llm-eval">&nbsp;</p>
          </div>
          <div id="navigation" class="navigation" style="display:none; margin-top:12px;">
            <button id="next-button" class="next-btn" title="Next position">Next →</button>
          </div>
          <p id="instruction" class="instruction">Press “Load Position” to begin.</p>
          <p id="status" class="status"></p>
        </aside>
      </div>
    </div>
    <!--
      Our application logic. No external dependencies are required because the
      chessboard is rendered with vanilla JavaScript and Unicode characters. The
      script handles FEN parsing, move generation and user interaction.
    -->
    <!-- Pre‑loaded dataset of entries parsed from the CSV. It defines a global
         array called ENTRIES. -->
    <script src="data.js"></script>
    <script src="script.js"></script>
  </body>
</html>